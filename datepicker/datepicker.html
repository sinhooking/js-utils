<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="//code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script>
</head>

<body>
    <p>Date: <input type="text" name="level_date" id="datepicker"></p>
    <p>
        <select name="freetest_time" id="">
            <!-- <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option> -->
        </select>
    </p>
    <p>
        <select name="freetest_minutes" id="">
            <!-- <option value="10">10</option>
            <option value="20">20</option>
            <option value="30">30</option>
            <option value="40">40</option> -->
        </select>
    </p>
    <script type="module">
        import DatePickerHandler from './Datepicker.js'

        $(document).ready(domLoadedEventHandler);

        //dom content loaded handler
        function domLoadedEventHandler() {
            var handler = new DatePickerHandler({
                pivot: 'input[name=level_date]',
                addHours: 2,
                datepickerTime: {
                    elementName: 'select[name=freetest_time]',
                    startLoopIndex: 6,
                    createElementLoopCount: 18
                },
                datepickerMinute: {
                    elementName: 'select[name=freetest_minutes]',
                    startLoopIndex: 0,
                    createElementLoopCount: 3
                }
            });

            // config korean datepicker option
            var MONTH = ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'];
            var DAY_NAME = ['일', '월', '화', '수', '목', '금', '토'];

            // setup datepicker option
            handler.setDefaults({
                dateFormat: 'yy-mm-dd',
                prevText: '이전 달',
                nextText: '다음 달',
                monthNames: MONTH,
                monthNamesShort: MONTH,
                dayNames: DAY_NAME,
                dayNamesShort: DAY_NAME,
                dayNamesMin: DAY_NAME,
                showMonthAfterYear: false,
                changeYear: false,
                changeMonth: false,
                yearSuffix: '년',
                minDate: "-D",
                beforeShowDay: $.datepicker.noWeekends
            });

            /*
            * initialize DateickerHandler
            */
            handler.datepickerStart();

            /*
            * if used virtual elements
            */
            handler.appendVirtualElements();

            /*
            * set default date
            */
            handler.setDefaultDate();

            $('input[name=level_date]').on('change', function () {
                handler.dateAndTimeChangeHandler();
            });

            $('select[name=freetest_time]').on('change', function () {
                handler.freetestTimeController();
            });
        }
        
        
    </script>
</body>

</html>